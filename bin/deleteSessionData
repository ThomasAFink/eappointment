#!/usr/bin/env php
<?php
$dir = realpath(__DIR__);
do {
    $dir = dirname($dir);
    if (file_exists("$dir/autoload.php")) {
        require_once("$dir/autoload.php");
    }
} while ($dir != '/' && !file_exists("$dir/config.php"));
if (file_exists("$dir/bootstrap.php")) {
    require("$dir/bootstrap.php");
} else {
    require("$dir/config.php");
}
if (isset($argv[3]) && $argv[3] == '--commit') {
    \BO\Zmsdb\Helper\SessionDeleteByCron::init($argv[1], $argv[2]);
} else {
    echo "Usage: {$argv[0]} sessionName timeInterval --commit\n\tATTENTION! Delete SessionData based on session name (string) and time (in minutes') interval. USE WITH CAUTION!\n\n"
        . "\t!!!!!!!!!!!!!!!!!!!!!!!\n"
        . "\t!! DATA LOSS WARNING !!\n"
        . "\t!!!!!!!!!!!!!!!!!!!!!!!\n\n";
}
