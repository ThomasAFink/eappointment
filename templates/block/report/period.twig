<div class="report-period">
    {% block breadcrumb %}
    <ul class="report-period--breadcrumb">
        <li class="report-period--subject">Auswertung</li>
    </ul>
    {% endblock %}

    {% set years = [] %}
    {% for key, entry in items.data %}
        {% if entry|first|length == 4 %}
            {% set years = years|merge([entry|first]) %}
        {% endif %}
    {% endfor %}

    <table class="report-period--table">
        <tbody>
            {% for year in years|reverse %}
                <tr>
                    <td class="report-period--year"><a href="{{ urlGet("Report%s%s"|format('Scope', source), {'scopeId': workstation.scope.id ,'period': year}, {}) }}">{{ year }}</a></td>
                    {% for month in 1..12 %}
                        {% set monthExists = 0 %}
                        {% set tmpmonth = year ~"-"~ "%02d"|format(month) %}
                        {% for entry in items.data if monthExists == 0 %}
                            {% if entry|first|length > 4 and entry|first|date('Y-m') == tmpmonth %}
                                {% set monthExists = 1 %}
                            {% endif %}
                        {% endfor %}
                        <td>
                            {% if monthExists %}
                                <a href="{{ urlGet("Report%s%s"|format('Scope',source), {'scopeId': workstation.scope.id ,'period': tmpmonth}, {}) }}">{{ tmpmonth|localizeddate("full","none",NULL,NULL,"MMMM") }}</a>
                            {% else %}
                                {{ tmpmonth|localizeddate("full","none",NULL,NULL,"MMMM") }}
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if not isOverview %}
    <p class="report-period--show-all" id="report-period--show-all">
        <a href="#report-period--show-all">Alle Jahre anzeigen</a>
    </p>
    {% endif %}
</div>
