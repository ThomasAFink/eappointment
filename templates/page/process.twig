{% extends "layout/main.twig" %}

{% use "block/content/buttons.twig" %}
{% use "block/content/feedback.twig" %}

{% from 'element/helper/form.twig' import formbutton, custombutton, hiddenfield %}

{% block pageid %}index{% endblock %}
{% block content %}
<div class="boxontop">
	<span class="noprint">
		<span class="msg_wartenummer_lautet">
		    {% trans "Ihre Wartenummer lautet" %}: <br>
		</span>
		<div class="nummernanzeige">
		    {{ process.queue.number }}
		</div>
    </span>
    <span class="noprint">
    	{% if queueList|length > 1 %}{% set plural = 1 %}{% endif %}
    	{% if queueList|length >= 1 %}
			{% if plural %}
    		Es warten {{ queueList|length }} Kunden vor Ihnen.
    		{% else %}
    		Es wartet 1 Kunde vor Ihnen.
    		{% endif %}
    	{% else %}
    	Es wartet niemand vor Ihnen.
    	{% endif %}
    	<br>
    	Bitte warten Sie auf Ihren Aufruf!
    </span>

	{% if
	    estimatedWaitingTime > scope.preferences.ticketprinter.notificationsDelay and
	    scope.preferences.ticketprinter.notificationsAmendmentEnabled and
	    scope.preferences.appointment.notificationConfirmationEnabled
	%}
    <div class="smsoptionbutton noprint">
        <p>Wartenummer wird im Anschluss ausgedruckt.</p>
        <p>
            WÃ¼nschen Sie eine SMS-Benachrichtigung<br/>
            {{ button.scope.preferences.notifications.headsUpTime }} Minuten vor ihrem Aufruf?
        </p>
		<form action="{{ urlGet('TicketprinterNotification', {}, {}) }}" method="post">
            {{ hiddenfield({ "name": "scopeId", "value": button.scope.id }) }}
            {{ hiddenfield({ "name": "organisationId", "value": organisation.id }) }}
            {{ formbutton({ "type":"submit", "class": "ja_nein", "name": "submit_yes", "label":"Ja"|trans }) }}
        </form>

		<form action="{{ urlGet('TicketprinterProcess', {}, {}) }}" method="post">
            {{ hiddenfield({ "name": "hasWaitingNumber", "value": 1 }) }}
            {{ formbutton({ "type":"submit", "class": "ja_nein option_nein", "name": "submit_no", "label":"Nein"|trans }) }}
        </form>
    </div>
	{% else %}
	<span class="noprint">
		<p>Ihre Wartenummer wird gedruckt.</p>
		<form action="{{ urlGet('TicketprinterProcess', {}, {}) }}" method="post">
            {{ hiddenfield({ "name": "hasWaitingNumber", "value": 1 }) }}
            {{ formbutton({ "type":"submit", "class": "ja_nein", "name": "submit_ok", "label":"OK" }) }}
        </form>
	</span>
	{% endif %}
</div>
{% endblock %}


