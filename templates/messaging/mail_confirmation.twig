{% use "@zmsentities/messaging/snippets.twig" %}
{% use "@zmsentities/lists/processes_summary.twig" %}
{% block german %}
<div style="color: #000000; background: #ffffff;">
{{ block("autogenerated_top_german") }}
{{ block("salutation_german") }}
hiermit bestätigen wir Ihnen Ihren gebuchten Termin am <strong> {{ (date|default(getNow))|format_datetime("short","none","EEEE, dd. MMMM y") }} um {{ (date|default(getNow))|date("H:i") }} {% trans %}Uhr{% endtrans %}</strong>.<br />
<br />
<strong>Ort:</strong> {{ process.scope.provider.name ~ ", " ~ process.scope.provider.contact.street ~ " "  ~ process.scope.provider.contact.streetNumber ~", " ~ process.scope.provider.contact.postalCode ~ " " ~ process.scope.provider.contact.city }}<br />
{% if process.scope.hint %}
({{ process.scope.hint }})<br />
{% endif %}<br />
Ihre Vorgangsnummer ist die <strong>"{{ process.id }}"</strong><br />
Ihr Code zur Terminabsage oder -änderung lautet <strong>"{{ process.authKey }}"</strong><br />
<br />
Sollten Sie den Termin nicht wahrnehmen können, sagen Sie ihn bitte <strong>unbedingt</strong> ab, damit wir den Termin neu vergeben können.<br />
<br />
Dies können Sie über unsere Internetbuchungsseite <a href="{{ config.appointments.urlChange }}">{{ config.appointments.urlChange }}</a> unter Angabe Ihrer Vorgangsnummer "{{ process.id }}" und Ihres persönlichen Absage-Codes "{{ process.authKey }}" erledigen.<br />
{% if config.appointments.sms.telephone %}
Oder schicken Sie eine SMS mit dem Inhalt "{{ config.appointments.sms.textCancel }}\{{ process.id }}" an die Rufnummer {{ config.appointments.sms.telephone }}.
"Hierbei ist die Groß- und Kleinschreibung von "{{ config.appointments.sms.textCancel }}" nicht wichtig. Bei Absage per SMS erhalten Sie zu Ihrer Sicherheit eine Bestätigungs-SMS Ihrer Absage.<br />
<br />
{% endif %}
<br />
{% if process.scope.provider.source == "dldb" and process.scope.provider.data.payment %}
Zahlungshinweis: {{ process.scope.provider.data.payment }}<br /><br />
{% endif %}
{% if process.requests|length > 1 %}
{% set requestalias = "Dienstleistungen" %}
{% else %}
{% set requestalias = "Dienstleistung" %}
{% endif %}
{% if process.requests|length == 0 %}
Sie haben keine Dienstleistungen ausgewählt.
{% else %}
Sie haben folgende {{ requestalias }} ausgewählt:
<br/><br />
    {% for request in process.requests %}
    <strong><a href="https://service.berlin.de/dienstleistung/{{ request.id }}/standort/{{ process.scope.provider.id }}/">{{ request.name }} am Standort {{ process.scope.provider.name }}</a></strong><br/>
    {% if request.source == "dldb" and request.data %}
    <br />
    <div style="border-left: 1em solid #ffffff; background: #ffffff;">
    {% include "@zmsentities/detail/service_detail_prerequisites.twig" with {"service":request.data, "headerlevel":"h4"} %}
    {% include "@zmsentities/detail/service_detail_requirements.twig" with {"service":request.data, "headerlevel":"h4"} %}
    {% include "@zmsentities/detail/service_detail_fees.twig" with {"service":request.data, "headerlevel":"h4"} %}
    </div>
    {% endif %}
    {% if process.requests|length > 1 and not loop.last %}
    <br />
    ----------------------
    <br /><br />
    {% endif %}
    {% endfor %}
{% endif %}
{% if processList is defined and processList|length > 0 %}
    {{ block("processes_summary_german") }}
{% endif %}
{{ block("sendoff_german") }}
</div>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "EventReservation",
  "reservationNumber": "{{ process.id }}",
  "reservationStatus": "http://schema.org/Confirmed",
  "modifyReservationUrl": "{{ config.appointments.urlChange }}",
  "modifiedTime": "{{ process.createTimestamp|date('c') }}",
  "underName": {
    "@type": "Person",
    "name": "{{ client.familyName }}"
  },
  "reservationFor": {
    "@type": "Event",
    "name": "{% for request in process.requests %}{{ request.name }}{% if not loop.last %},{% endif %} {% endfor %}",
    "startDate": "{{ date|date('c') }}",
    "location": {
      "@type": "Place",
      "name": "{{ process.scope.provider.name }}",
      "url": "{{process.scope.provider.link}}",
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "{{process.scope.provider.contact.lat}}",
        "longitude": "{{process.scope.provider.contact.lon}}"
      },
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "{{process.scope.provider.contact.street ~ " "  ~ process.scope.provider.contact.streetNumber}}",
        "addressLocality": "{{process.scope.provider.contact.city}}",
        "addressRegion": "{{process.scope.provider.contact.city}}",
        "postalCode": "{{process.scope.provider.contact.postalCode}}",
        "addressCountry": "DE"
      }
    }
  }
}
</script>
{% endblock %}
