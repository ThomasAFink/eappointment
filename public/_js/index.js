!function(){function e(t,n,o){function r(u,a){if(!n[u]){if(!t[u]){var l="function"==typeof require&&require;if(!a&&l)return l(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return r(n||e)},c,c.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}return e}()({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("../lib/baseview"),f=o(l),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindPublicMethods("initClock","setInterval"),console.log("Found digital clock"),n.$.ready(n.setInterval),n}return u(t,e),a(t,[{key:"initClock",value:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds(),r=t;r+=o%2?(n<10?":0":":")+n:(n<10?":0":" ")+n,this.$.text(r)}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){setInterval(this.initClock,1e3)})}]),t}(f["default"]);n["default"]=c},{"../lib/baseview":5}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("../lib/baseview"),f=o(l),c=e("jquery"),s=o(c),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source=n.$.attr("id"),"waitingNumberPad"==n.source?n.minNumberLength=1:n.minNumberLength=10,n.bindPublicMethods("appendNumber","deleteNumber","clearNumbers","checkNumber"),console.log("Found keyboard-handheld"),n.$.find("button.ziffer").on("click",n.appendNumber),n.$.find("button#removelastdigit").on("click",n.deleteNumber),n.$.find("button#removealldigitsphone").on("click",n.clearNumbers),n.$numberInput=n.$.find(".nummerneingabe"),n}return u(t,e),a(t,[{key:"appendNumber",value:function(e){var t=(0,s["default"])(e.target).closest("button"),n=t.text();return this.$numberInput.val(this.$numberInput.val()+""+n),this.checkNumber(),!1}},{key:"deleteNumber",value:function(){return this.$numberInput.val(this.$numberInput.val().replace(/.$/,"")),this.checkNumber(),!1}},{key:"clearNumbers",value:function(){return this.$numberInput.val(""),this.checkNumber(),!1}},{key:"checkNumber",value:function(){var e=this.$numberInput.val();"waitingNumberPad"==this.source&&(e=e.replace(/^0+/,"")),e=e.replace(/[^\d]/g,"");var t=this.$.find(".nachtrag");e.length>=this.minNumberLength?t.removeClass("disabled").attr("disabled",!1):t.hasClass("disabled")||t.addClass("disabled").attr("disabled",!0),this.$numberInput.val(e)}}]),t}(f["default"]);n["default"]=d},{"../lib/baseview":5,jquery:"jquery"}],3:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("jquery"),i=o(r),u=function(e){var t=(0,i["default"])(e);t.on("submit",function(e){t.data("submitted")===!0?(e.stopPropagation(),e.preventDefault()):t.data("submitted",!0)})};n["default"]=u},{jquery:"jquery"}],4:[function(e,t,n){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}e("babel-polyfill");var o="undefined"!=typeof window?window.window:"undefined"!=typeof t?t.window:null,r=n(o),i=e("jquery"),u=n(i),a=e("./settings"),l=n(a),f=e("./page/main"),c=n(f),s=e("./page/newhash"),d=n(s),p=e("./page/process"),b=n(p),h=e("./block/digital-clock"),y=n(h),v=e("./block/notification-keyboard-handheld"),g=n(v),w=e("./element/form/preventFormResubmit"),m=n(w);r["default"].$=u["default"],r["default"].bo={zmsticketprinter:l["default"]},(0,u["default"])("#newhash").each(function(){new d["default"](this)}),(0,u["default"])("#index, #message, #exception").each(function(){new c["default"](this)}),(0,u["default"])("#process").each(function(){new b["default"](this)}),(0,u["default"])(".digitaluhr").each(function(){new y["default"](this)}),(0,u["default"])(".smsbox").each(function(){new g["default"](this)}),(0,u["default"])("form").each(function(){(0,m["default"])(this)}),console.log("Welcome to the ZMS Ticketprinter interface...")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./block/digital-clock":1,"./block/notification-keyboard-handheld":2,"./element/form/preventFormResubmit":3,"./page/main":10,"./page/newhash":11,"./page/process":12,"./settings":13,"babel-polyfill":"babel-polyfill",jquery:"jquery"}],5:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("jquery"),f=o(l),c=e("./errorHandler"),s=o(c),d=e("./dialogHandler"),p=o(d),b=e("./utils"),h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.$main=(0,f["default"])(e),n}return u(t,e),a(t,[{key:"$",get:function(){return this.$main}}],[{key:"loadCallStatic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:t};return"POST"!==t&&"PUT"!==t||(o.data=n),new Promise(function(t,n){f["default"].ajax(e,o).done(function(e){t(e)}).fail(function(t){console.log("XHR load error",e,t),n(t)})})}},{key:"loadDialogStatic",value:function(e,t){var n=(0,b.lightbox)(this.$main,function(){r(),t()}),o=n.lightboxContentElement,r=n.destroyLightbox;new p["default"](o,{response:e,callback:function(){t(),r()}})}}]),t}(s["default"]);n["default"]=h},{"./dialogHandler":7,"./errorHandler":8,"./utils":9,jquery:"jquery"}],6:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e)}return r(e,[{key:"bindPublicMethods",value:function(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];n.forEach(function(t){if("function"!=typeof e[t])throw"Method not found: "+t;e[t]=e[t].bind(e)})}}]),e}();n["default"]=i},{}],7:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=e("jquery"),a=o(u),l=function(){function e(t,n){r(this,e),this.$main=(0,a["default"])(t),this.response=n.response,this.callback=n.callback||function(){},this.parent=n.parent,this.handleLightbox=n.handleLightbox||function(){},this.bindEvents(),this.render()}return i(e,[{key:"render",value:function(){var e=(0,a["default"])(this.response).filter("div.dialog");if(0==e.length){var t=(0,a["default"])(this.response).find("div.dialog");t.length>0&&(e=t.get(0).outerHTML)}this.$main.html(e)}},{key:"bindEvents",value:function(){var e=this;this.$main.off().on("click",".button-ok",function(t){t.preventDefault(),t.stopPropagation(),e.callback(t)}).on("click",".button-abort",function(t){t.preventDefault(),t.stopPropagation(),e.handleLightbox()}).on("click",".button-callback",function(t){t.preventDefault(),t.stopPropagation();var n=(0,a["default"])(t.target).data("callback");e.callback=e.parent[n],e.callback(t)})}}]),e}();n["default"]=l},{jquery:"jquery"}],8:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("./bindHandler"),f=o(l),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._errorHandler=function(){},e}return u(t,e),a(t,[{key:"errorHandler",get:function(){return this._errorHandler},set:function(e){this._errorHandler=e}}]),t}(f["default"]);n["default"]=c},{"./bindHandler":6}],9:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.forceHttps=n.lightbox=void 0;var r=e("jquery"),i=o(r),u=e("./baseview"),a=o(u),l=e("../settings"),f=o(l),c='<div class="lightbox"><div class="lightbox__content"></div></div>';n.lightbox=function(e,t){var n=(0,i["default"])(c);e||(e=(0,i["default"])("body"),n.addClass("fixed"));var o=function(){n.off(),n.remove()},r=n.find(".lightbox__content");return n.on("click",function(e){e.stopPropagation(),e.preventDefault(),o(),t()}).on("click",".lightbox__content",function(e){e.stopPropagation()}),(0,i["default"])(e).find(".lightbox").length&&(0,i["default"])(e).find(".lightbox").remove(),(0,i["default"])(e).append(n),{lightboxContentElement:r,destroyLightbox:o}},n.forceHttps=function(){"https:"!==document.location.protocol&&a["default"].loadCallStatic(f["default"].includeUrl+"/dialog/?template=force_https").then(function(e){a["default"].loadDialogStatic(e,function(){document.location.href="https://"+document.location.href.substring(document.location.protocol.length,document.location.href.length)})})}},{"../settings":13,"./baseview":5,jquery:"jquery"}],10:[function(e,t,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("../lib/baseview"),f=o(l),c="undefined"!=typeof window?window.window:"undefined"!=typeof t?t.window:null,s=o(c),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindPublicMethods("setInterval","reloadPage"),console.log("Redirect to home url every 30 seconds"),n.$.ready(n.setInterval),n}return u(t,e),a(t,[{key:"reloadPage",value:function(){s["default"].location.href=this.getUrl("/home/")}},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=s["default"].bo.zmsticketprinter.reloadInterval;setInterval(this.reloadPage,1e3*e)})},{key:"getUrl",value:function(e){var t=s["default"].bo.zmsticketprinter.includepath;return t+e}}]),t}(f["default"]);n["default"]=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/baseview":5}],11:[function(e,t,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("../lib/baseview"),f=o(l),c="undefined"!=typeof window?window.window:"undefined"!=typeof t?t.window:null,s=o(c),d=e("js-cookie"),p=o(d),b=e("jquery"),h=o(b),y=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindPublicMethods("load","setTimeout","getUrl","reloadPage"),(0,h["default"])(s["default"]).on("load",n.load),n}return u(t,e),a(t,[{key:"load",value:function(){p["default"].remove("Ticketprinter",{secure:!0}),this.setTimeout()}},{key:"reloadPage",value:function(){s["default"].location.href=this.getUrl("/home/")}},{key:"setTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){setTimeout(this.reloadPage,5e3)})},{key:"getUrl",value:function(e){var t=s["default"].bo.zmsticketprinter.includepath;return t+e}}]),t}(f["default"]);n["default"]=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/baseview":5,jquery:"jquery","js-cookie":14}],12:[function(e,t,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("../lib/baseview"),f=o(l),c="undefined"!=typeof window?window.window:"undefined"!=typeof t?t.window:null,s=o(c),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindPublicMethods("printDialog","reload"),console.log("Print data and redirect to home url after presetted time"),n.$.ready(n.printDialog),n}return u(t,e),a(t,[{key:"reload",value:function(){s["default"].location.href=this.getUrl("/home/")}},{key:"getUrl",value:function(e){var t=s["default"].bo.zmsticketprinter.includepath;return t+e}},{key:"printDialog",value:function(){var e=this;document.title="Anmeldung an Warteschlange",s["default"].print();var t=function(){console.log("start printing")},n=function(){var t=s["default"].bo.zmsticketprinter.reloadInterval;setTimeout(function(){e.reload()},1e3*t)};if(s["default"].matchMedia){var o=s["default"].matchMedia("print");o.addListener(function(e){e.matches?t():n()})}s["default"].onbeforeprint=t,s["default"].onafterprint=n}}]),t}(f["default"]);n["default"]=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/baseview":5}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={reloadInterval:30,animationEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",includeUrl:"/terminvereinbarung/ticketprinter"}},{}],14:[function(e,t,n){!function(e){var o;if("function"==typeof define&&define.amd&&(define(e),o=!0),"object"==typeof n&&(t.exports=e(),o=!0),!o){var r=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=r,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(o){function r(){}function i(t,n,i){if("undefined"!=typeof document){i=e({path:"/"},r.defaults,i),"number"==typeof i.expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var u=JSON.stringify(n);/^[\{\[]/.test(u)&&(n=u)}catch(a){}n=o.write?o.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var l="";for(var f in i)i[f]&&(l+="; "+f,i[f]!==!0&&(l+="="+i[f].split(";")[0]));return document.cookie=t+"="+n+l}}function u(e,n){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],u=0;u<i.length;u++){var a=i[u].split("="),l=a.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var f=t(a[0]);if(l=(o.read||o)(l,f)||t(l),n)try{l=JSON.parse(l)}catch(c){}if(r[f]=l,e===f)break}catch(c){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return u(e,!1)},r.getJSON=function(e){return u(e,!0)},r.remove=function(t,n){i(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}return n(function(){})})},{}]},{},[4]);
//# sourceMappingURL=index.js.map?build=f106d66c2113bf28cf2c02bb73ec49089c885a6a
